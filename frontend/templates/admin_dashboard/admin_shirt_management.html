{% extends "admin_base.html" %}

{% block title %}Shirt & Order Management{% endblock %}

{% block head %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/static/css/admin_dashboard/admin_shirt_management.css">
{% endblock %}

{% block content_header %}
    <h1 class="dashboard-title">Shirt Campaign and Order Management</h1>
{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div id="adminData"
         data-admin-id="{{ admin_id if admin_id is not none else '' }}"
         data-organization-id="{{ organization_id if organization_id is not none else '' }}"
         style="display: none;">
    </div>

    <div class="card mb-5">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h4>Shirt Campaigns</h4>
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createCampaignModal">Add New Campaign</button>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="campaignsTable">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Price</th>
                            <th>Pre-Order Deadline</th>
                            <th>Stock</th>
                            <th>Active</th>
                            <th>Image</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h4>Student Shirt Orders</h4>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="orderCampaignFilter" class="form-label">Filter by Campaign:</label>
                    <select class="form-select" id="orderCampaignFilter">
                        <option value="">All Campaigns</option>
                    </select>
                </div>
                <div class="col-md-6 d-flex align-items-end">
                    <button class="btn btn-info w-100" id="applyOrderFilters">Apply Filters</button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="ordersTable">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Student</th>
                            <th>Campaign</th>
                            <th>Size</th>
                            <th>Quantity</th>
                            <th>Total Price</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/admin_dashboard/shirt_management_modals.js"></script> {# New script for modals #}
<script src="../../static/js/admin_dashboard/admin_shirt_management.js"></script>
<script>
    // Call the function to load modals when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        loadShirtManagementModals();
    });
</script>
{% endblock %}